# DAuth - Generate and destroy user accounts just-in-time

This repo is for introducing decentralized authentication. Authentication WITHOUT EVEN A USER DATABASE.<br><br>

The idea is to exchange a token (QR Code) which is generated by a combination of name and passphrase.<br>
The QR Code is never shown and will be encrypted for transactions.<br><br>

Security measures are not taken yet. (see "How to improve security?")<br>

# How does it work?

The component combines both inputs, name and pass. The QR Code is generated from the result (namepass)<br>
The exact same QR Code pattern is only generated again, with the right name and passphrase.<br>

# How to use?

- npm install (install dependencies)
- npm run dev (run hot-reload dev environment)
- npm run build (edge-ready, vanillaJS, compressed)

# Sequence
1. At sign-up you generate a new QR Code from your name and a passphrase.<br>
The QR Code is generated from the combination of both.<br><br>

2. The QR Code is for the period of the session connected with the user events/actions.

3. The first time you create a profile or post, this QR-code will be connected with your new profile or post<br>
```profile-creator: qrcode123 or post-creator: qrcode123``` (Pseudocode)<br><br>

This way, the profile or post "knows" who you are (which gives permission for edit/delete for instance)

```
// Pseudocode

{#if user = qrcode123}
editmode()

{#else}
watchmode()

{/if}
```

4. If the user logs out, the session gets destroyed, but not the created documents (profile, posts, messages)(own storage&sync-logic neccessary)
5. If the user returns, with the right combination of name and passphrase, he generates the exact same QR Code. This gives him access to his created documents again.

# Advantages

- Your name and passphrase are neither locally nor online saved. Just in your head.
- No user-database neccessary. The user basically generates himself on-demand, by simply logging in. And destroys himself by logging out.
- No database requests for permissions. The moment you load the post your permissions are set.

# How to improve security? (suggestions, Work in Progress)

- by hiding the QR-code
- salting the combined namepass (multiple times = stronger)
- encrypt the salted combined namepass value
- encrypted transfer of the QR-code (base64, then webcrypto AES or SEA)
- mechanism to make sure only 1 QR-code each user
<br><br>

# QR Code encryption/decryption idea

### Encryption
1. Convert QR Code pic with base64 to string (name=pub-key) and encrypt it with AES 256. (secret-key)

### Use
1. When the user creates a document, the string gets written to that document.
2. You open the post, the app uses the secret key to decrypt the string, base64 to qr, match-function, authenticated...<br><br>

![image](https://user-images.githubusercontent.com/67427045/213913807-464d737b-0bfb-4ece-a0d4-64cceac29671.png)
